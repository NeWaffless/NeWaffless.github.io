<!DOCTYPE html>
<html  class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>Draw Together | Aidan Walbran</title>
    <meta name="description" content="Personal Website Portfolio">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="author" content="Aidan Walbran">

    <meta property="og:title" content="Aidan Walbran">
    <meta property="og:type" content="Website">
    <!-- todo: og:url -->
    <meta property="og:url" content="">
    <meta property="og:description" content="Personal Website Portfolio">
    <!-- todo: og:image -->
    <meta property="og:image" content="">

    <link rel="icon" type="image/x-icon" href="../img/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="../img/favicon.svg">
    <link rel="apple-touch-icon" href="../img/apple-touch-icon.png">

    <link rel="stylesheet" 
        href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@462&display=swap" rel="stylesheet">
    <link rel="stylesheet" 
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" 
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/project.css">
    <link rel="stylesheet" href="../css/draw-together.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row justify-content-end">
            <nav class="col-md-2 px-0 sidebar text-center fixed-top collapse" id="sidebar">
                <a id="sidebar-close-button" data-toggle="collapse" href="#sidebar" role="button" aria-expanded="true" aria-controls="sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="var(--main-cream)" class="bi bi-x" id="sidebar-close-icon" viewBox="0 0 16 16">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                    </svg>
                </a>

                <div class="sidebar-content">
                    <div class="sidebar-header">
                        <img class="img-fluid rounded-circle p-2" id="sidebar-profile-img" src="../img/newaffless.png" alt="Profile picture">
                        <p class="p-0 m-2">
                            <strong>Aidan Walbran</strong>
                            <br>Game Programmer
                        </p>
                        <div class="mb-4">
                            <a href="mailto:aidanwalbran@gmail.com" target="_blank" class="mx-1 text-reset">
                                <i class="bi bi-envelope-fill"></i>
                            </a>
                            <a href="https://github.com/NeWaffless" target="_blank" class="mx-1 text-reset">
                                <i class="bi bi-github"></i>
                            </a>
                            <a href="https://www.linkedin.com/in/aidan-walbran/" target="_blank" class="mx-1 text-reset">
                                <i class="bi bi-linkedin"></i>
                            </a>
                            <a href="https://twitter.com/NeWaffless" target="_blank" class="mx-1 text-reset">
                                <i class="bi bi-twitter"></i>
                            </a>
                        </div>
                    </div>

                    <div class="sidebar-navigation">
                        <a class="p-3" href="../index.html">Home</a>
                        <a class="dropdown-toggle p-3" data-toggle="collapse" aria-expanded="true" href="#projects-submenu">Projects</a>
                        <ul class="collapse show list-unstyled" id="projects-submenu">
                            <li>
                                <a class="p-2" href="lost-reef.html">Lost Reef</a>
                            </li>
                            <li>
                                <a class="active p-2" href="draw-together.html">Draw Together</a>
                            </li>
                            <li>
                                <a class="p-2" href="acorn-game.html">Acorn Game</a>
                            </li>
                        </ul>
                        <a class="p-3" href="about.html">About</a>
                        <a class="p-3" href="resume.html">Resume</a>
                        <a class="p-3" href="contact.html">Contact</a>
                    </div>

                    <p class="my-5 copyright">© Aidan Walbran 2022</p>
                </div>
            </nav>

            <div class="row m-0 pt-0 topbar d-block d-md-none sticky-top no-gutters">
                <div class="col">
                    <div id="topbar-content">
                        <a class="btn" id="hamburger-icon-container" data-toggle="collapse" href="#sidebar" role="button" aria-expanded="false" aria-controls="sidebar">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="var(--main-cream)" class="bi bi-list" id="hamburger-icon" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                            </svg>
                        </a>
                        <p class="m-0" id="topbar-text">Projects > Draw Together</p>
                    </div>
                    <hr class="m-0">
                </div>
            </div>

            <div class="col-12 col-md-10">
                <section class="container pt-4 page-main-container">
                    <h1>DRAW TOGETHER</h1>
                    <hr>
                    <div class="row project-header">
                        <div class="col-12 col-lg-6 mb-3 embed-responsive embed-responsive-16by9 project-video">
                            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/D4OKyW6xh2g" title="Draw Together video" allowfullscreen></iframe>
                        </div>
                        <div class="col-12 col-lg-6 mb-3 video-sidebar">
                            <div>
                                <h5>Roles</h5>
                                <p>Programmer, Designer</p>
                            </div>
                            <div>
                                <h5>Software used</h5>
                                <p>HTML, CSS, JS, Node.js, Express.js, NeDB, p5.js, GitHub</p>
                            </div>
                            <div id="external-button-wrapper">
                                <a class="btn my-button" id="gh-repo-button" role="button" href="https://github.com/NeWaffless/Draw-Together" target="_blank">
                                    <i class="bi bi-github p-0 mr-2" id="gh-repo-button-icon"></i>
                                    <p class="p-0 m-0">gh repo</p>
                                </a>
                                <div id="figma-button-wrapper">
                                    <a class="btn my-button" id="figma-student-button" role="button" href="" target="_blank">
                                        <svg class="figma-logo" data-name="figma-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41.5 60.5"><defs><style>.cls-1{fill:none;stroke-width:5px;}</style></defs><path class="cls-1" d="M21,30.5a9.49,9.49,0,1,1,2.78,6.72A9.51,9.51,0,0,1,21,30.5Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,49.5A9.49,9.49,0,0,1,11.5,40H21v9.5a9.5,9.5,0,1,1-19,0Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M21,2V21h9.5a9.5,9.5,0,1,0,0-19Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,11.5A9.49,9.49,0,0,0,11.5,21H21V2H11.5A9.49,9.49,0,0,0,2,11.5Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,30.5A9.49,9.49,0,0,0,11.5,40H21V21H11.5A9.49,9.49,0,0,0,2,30.5Z" transform="translate(-0.25 -0.25)"/></svg>
                                        <p class="p-0 m-0">student</p>
                                    </a>
                                    <a class="btn my-button" id="figma-teacher-button" role="button" href="" target="_blank">
                                        <svg class="figma-logo" data-name="figma-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41.5 60.5"><defs><style>.cls-1{fill:none;stroke-width:5px;}</style></defs><path class="cls-1" d="M21,30.5a9.49,9.49,0,1,1,2.78,6.72A9.51,9.51,0,0,1,21,30.5Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,49.5A9.49,9.49,0,0,1,11.5,40H21v9.5a9.5,9.5,0,1,1-19,0Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M21,2V21h9.5a9.5,9.5,0,1,0,0-19Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,11.5A9.49,9.49,0,0,0,11.5,21H21V2H11.5A9.49,9.49,0,0,0,2,11.5Z" transform="translate(-0.25 -0.25)"/><path class="cls-1" d="M2,30.5A9.49,9.49,0,0,0,11.5,40H21V21H11.5A9.49,9.49,0,0,0,2,30.5Z" transform="translate(-0.25 -0.25)"/></svg>
                                        <p class="p-0 m-0">teacher</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="project-description">
                            <p><strong>Draw Together</strong> is a set of tablet companion applications designed as an in class activity for students with speech and/or language disorders. Draw Together prompts students to communicate with one another through drawing on their own devices, and then having their drawings shared with their classmates through an interactive display. The application is designed as a fun, accessible, child friendly way for children to interact with one another, where they might usually have some difficulties doing so. The application seen above is a functional prototype of the student application, in the form of a web application.</p>
                        </div>

                        <div class="carousel slide project-carousel" id="project-carousel" data-interval="false">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-1.png" alt="First slide">
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-2.png" alt="Second slide">
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-3.png" alt="Third slide">
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-4.png" alt="Fourth slide">
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-5.png" alt="Fifth slide">
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="d-flex justify-content-center">
                                        <img class="d-block w-100" src="../img/draw-together/dt-carousel-6.png" alt="Sixth slide">
                                    </div>
                                </div>
                            </div>
                            <a class="carousel-control-prev" href="#project-carousel" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#project-carousel" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>

                        <div class="project-features">
                            <h5>Features</h5>
                            <ul id="project-features-list">
                                <li>
                                    Login system
                                </li>
                                <ul>
                                    <li>
                                        > retain user information, system adjusts accordingly
                                    </li>
                                    <li>
                                        > user databased stores information and drawings
                                    </li>
                                </ul>
                                <li>
                                    Drawing space
                                </li>
                                <ul>
                                    <li>
                                        > user can draw
                                    </li>
                                    <li>
                                        > change background colour
                                    </li>
                                    <li>
                                        > erasing areas of the drawing
                                    </li>
                                    <li>
                                        > undo or redo the 10 most recent changes
                                    </li>
                                </ul>
                                <li>
                                    Interactive Jigsaw display
                                </li>
                                <ul>
                                    <li>
                                        > all stored drawings displayed in jigsaw templates
                                    </li>
                                    <li>
                                        > users can zoom in/out of, and pan around
                                    </li>
                                    <li>
                                        > jigsaw data structure displays drawings from the centre, spiraling outwards
                                    </li>
                                    <li>
                                        > piece placement algorithm with priorities
                                    </li>
                                </ul>
                            </ul>
                        </div>

                        <div class="project-additional">
                            <h5>Implementation details</h5>
                            <p><strong><em>Software overview</em></strong></p>
                            <p>
                                The student prototype is developed as a locally hosted website with a frontend and a
                                backend. The frontend is programmed in vanilla HTML, CSS and JavaScript that manages
                                the visual design of the prototype. The backend is hosted locally using Node.js in
                                combination with Express.js to communicate between the frontend, and a database, in this
                                case, due to the current simplicity of the implementation, NeDB was used as a lightweight
                                database framework. Other libraries or packages that were used during the development of
                                the prototype include p5.js, jQuery, and the Node.js FileSystem.
                            </p>
                            <p><strong><em>Data overview</em></strong></p>
                            <p>
                                In the prototype, data is stored using the NeDB database framework, in the ‘database.db’ file.
                                The server accesses the database, and calls the file when it needs to read or store data. The
                                database stores all users in the system in the follow JSON object format:
                                <ul>
                                    <li>‘uid:{users unique id}’ - represented as a 5 character string</li>
                                    <li>‘fname:{users first name}’ - represented as a string of characters</li>
                                    <li>‘sname:{users surname}’ - represented as a string of characters</li>
                                    <li>‘id:{nedb database identification}’ - generated by the database</li>
                                </ul>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/db-user-example.PNG" alt="Example json of user entry">
                                <br>
                                The information of the current user is stored in a separate ‘curr_uid.json’ file (in actual
                                implementation this would likely be managed locally on the user's device). The data stored in
                                this file is the database entry for that user. This data is used to send information to the
                                server based on the user’s current progress, or to get data from the server when the user
                                needs to retrieve information, usually in the form of their own drawing.
                                Lastly, the server stores all images completed by users in a ‘user_imgs’ folder as JSON
                                objects in ‘uid.json’ files where ‘uid’ represents the user's unique 5 digit identification number.
                                These files contain the following information:
                                <ul>
                                    <li>‘name:{users full name}’ - a combination of all user names as one string</li>
                                    <li>‘col:{colour of the users background}’ - represented as a non-negative integer that
                                        references the index of the colour amongst all colours</li>
                                    <li>‘drawStr:{users drawing}’ - represented as a base64 string so that the image data can
                                        be passed around and stored</li>
                                </ul>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/db-drawing-example.PNG" alt="Example json of drawing entry">
                                <br>
                                It should be noted that these files should be further categorically stored based on the
                                data/activity that the drawing was in response to, to accommodate for further activities.
                                These files are stored and only the server has access to them at any given time. At no point can 
                                the user directly access the data in the database/file system (this is similar to actual 
                                implementation).
                            </p>
                            <p><strong><em>Drawing pad implementation</em></strong></p>
                            <p>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/drawpad.png" alt="Drawing pad page example">
                                <br>
                                The drawing pad component is developed using the p5.js javascript library that affords for
                                visual javascript. This is specifically used in the ‘drawpad.html’ page represented as the
                                canvas the user draws on, and interactable through mouse press, as well as external buttons
                                on the side. The primary drawing implementation simply uses
                                the user’s mouse position and the mouse buttons to determine if a line should be drawn
                                between the previous mouse position and the current mouse position at any given frame.
                                The eraser is treated the same way, but rather than drawing a line with the colour black, the
                                line is drawn in the same colour as the background to give the illusion of erasing.
                                <br><br>
                                The background colour change is performed similarly to the p5.js image THRESHOLD
                                function, which converts an image to black and white by looping over all pixels on the screen
                                and determining their new colour based on colour information in comparison to a threshold
                                value. In our case, the code loops over all pixels, and either assigns it the colour black (where
                                the user has drawn), or the new background colour. This is so that the pixels that have been
                                erased also change colour with the background. The threshold value used,
                                is 1 value less than the sum of the RGB channels of the darkest colour (the darkest shade of
                                green in this case). In this way, any colour above the threshold value is changed to another
                                colour, and the black pixels stay black. It should be noted, to keep the application performant
                                for all users, the pixel density is constrained to 1 for all users so that looping over all pixels
                                on the canvas is not an intensive process. Without constraint, the background colour change
                                takes at minimum 4 times as long, and negatively impacts user experience.
                                <br><br>
                                The undo button is linked to the drawing history, which is stored in a separate History Buffer
                                data structure that acts as a circular buffer. This works by generating an array of a
                                predetermined size (buffer size + 1), and storing the start, and end pointers of the used
                                portion of the array. As elements are added to the array, the endpoint is incremented, and if it
                                ever reaches the end of the array, it loops around back to the start of the array, incrementing
                                the start pointer by 1, effectively overriding the first element in the array. In this way, a
                                number of user actions can be stored up to the buffer size, and any subsequent actions will
                                override the oldest user action. Due to issues and errors when passing around a canvas,
                                each user action is stored as an image of the canvas at the time of that action, and when the
                                user reverts an action, the canvas copies all pixels of the image, overriding the current
                                canvas.
                                <br>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/circular-buffer.png" alt="History data structure visualisation">
                            </p>
                            <p><strong><em>Jigsaw data structure</em></strong></p>
                            <p>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/jigsaw.png" alt="Jigsaw page example">
                                <br>
                                The jigsaw uses a Jigsaw Grid data structure to numerically represent an array (where the
                                jigsaw pieces are stored), as a square jigsaw spiralling outwards. This data structure is necessary to
                                afford for a square of jigsaw pieces that infinitely expands from a central location (the
                                question). Look below for a visual representation of the Jigsaw Grid.
                                <br>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/jigsaw-visualisation.png" alt="Visualisation of jigsaw data structure">
                                <br>
                                To get from any given piece in the data structure to any adjacent piece in the data structure,
                                mathematical patterns are used to equate the position. This is necessary for any fine-tuned
                                placement algorithms, as well as possible adjacency checks for individual pieces. As such,
                                each piece in the grid has 4 key components:
                                <ul>
                                    <li>Index</li>
                                    <li>Rings</li>
                                    <li>Rows / Columns</li>
                                    <li>Quadrant</li>
                                </ul>
                                The index of any given piece is its position in the array. The ring of any given piece is it’s
                                distance from the centre of the jigsaw as a layer of jigsaw pieces (indexing from the 4
                                question pieces as ring 0). The row and column of each piece is it’s direct vertical and
                                horizontal positioning in relation to the centre. Due to the centre of the jigsaw being a 2x2 of
                                question pieces and for formulaic ease, there is no 0 index row or column, and rather, starts
                                from 1 or -1 respectively. The positive direction of the horizontal axis is right, and the positive
                                direction of the vertical axis is up, similar to the Cartesian plane. Finally, the
                                quadrant(s) of a piece is the side of the jigsaw that the piece is on in it’s current ring (as an
                                integer representing each of the 4 cardinal directions). A representation of these
                                components can be found below.
                                <br>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/jigsaw-piece-information.png" alt="Jigsaw piece information example">
                                <br>
                                To find any other adjacent piece a set of checks are used to determine the array position of
                                that piece based on the current position and the direction of the next piece. These are found
                                through a series of mathematical patterns based on the visual layout above and can be
                                found summarized below.
                                <br>
                                <img class="technical-implementation-img py-2 my-2 mx-auto d-block img-fluid" src="../img/draw-together/technical/jigsaw-equations.png" alt="Jigsaw data structure equations">
                                <br>
                                At each array position with a piece, a reference to the HTML DOM element is stored, along
                                with the JSON object of the user's drawing. This way, the ‘jigsaw.js’ script can create and
                                assign pieces and their respective locations on the screen, as well as pass necessary
                                information when an individual piece is clicked on.
                                User interactivity is determined through ‘mousedown’, ‘mousemove’ and ‘mouseup’ events,
                                along with boolean variables to determine the user's intended course of action when they
                                click on the screen. This allows the code to understand whether the user intends to click and
                                view a singular drawing, or to pan the jigsaw display to see more of the images.
                            </p>
                        </div>
                        
                        <div class="project-credits">
                            <h5>Credits</h5>
                            <p>
                                <a href="https://www.linkedin.com/in/noah-pham-716696196/" target="_blank">Noah Pham Van</a> - Illustrator, Designer<br>
                                <a href="https://www.linkedin.com/in/raveenjayawardene/" target="_blank">Raveen Jayawardene</a> - Animation/Video, Designer<br>
                                <a href="https://www.linkedin.com/in/wilfred-wong-430433154/" target="_blank">Wilfred Wong</a> - Project Planner/Management, Designer<br>
                            </p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Boot strap -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" 
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" 
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" 
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" 
        crossorigin="anonymous"></script>
</body>
</html>